<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì…ì£¼ì²­ì†Œ ê²¬ì  ê³„ì‚°ê¸°</title>
<style>
body {
  font-family: 'Pretendard', sans-serif;
  background: #fff4f7; /* ğŸ’— ì—°í•œ í•‘í¬ ë°°ê²½ */
  margin: 0;
  padding: 30px;
}
.container {
  display: flex;
  justify-content: space-between;
  gap: 20px;
  max-width: 1300px;
  margin: auto;
}
.panel {
  flex: 1;
  background: #fff;
  border-radius: 15px;
  padding: 25px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}
h2 {
  text-align: center;
  color: #444;
}
label {
  font-weight: 600;
  margin-top: 10px;
  display: block;
  color: #333;
}
input, select {
  width: 100%;
  padding: 8px;
  margin-top: 5px;
  border: 1px solid #ccc;
  border-radius: 6px;
  font-size: 14px;
}

/* âœ… ë‚ ì§œ/ì‹œê°„ í•œ ì¤„ ì •ë ¬ */
.flex-row {
  display: flex;
  align-items: flex-end;
  gap: 10px;
}
.flex-row input[type="date"] {
  width: 55%;
}
.flex-row select {
  width: auto;
  min-width: 60px;
}

/* ì˜µì…˜ ì²´í¬ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
.options {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px 16px;
}
.options label {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  font-size: 14px;
}
.options input[type="checkbox"] {
  width: 18px;
  height: 18px;
  accent-color: #ff5d8f;
  cursor: pointer;
}

/* ì˜ˆì•½ê¸ˆ í‘œì‹œ */
.range-value {
  text-align: center;
  font-weight: bold;
  margin-top: 8px;
  color: #ff5d8f;
}

/* âœ… ê²°ê³¼ì°½: ì²˜ìŒì—” ìˆ¨ê¹€ */
.result-box {
  display: none;
  text-align: center;
  margin-top: 25px;
  font-weight: bold;
  white-space: pre-line;
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
button {
  width: 100%;
  padding: 12px;
  margin-top: 15px;
  border: none;
  border-radius: 8px;
  color: white;
  background: #ff5d8f;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}
button:hover { background: #e44d7f; }
.copy-btn { background: #6cc070; }
.copy-btn:hover { background: #5aa85e; }
</style>
</head>
<body>
<h2>ğŸ§¼ ì…ì£¼ì²­ì†Œ ê²¬ì  ê³„ì‚°ê¸°</h2>

<div class="container">
  <!-- ì™¼ìª½ -->
  <div class="panel">
    <h3>ğŸ“‹ ì²­ì†Œ ê¸°ë³¸ì •ë³´</h3>
    <div class="flex-row">
      <div>
        <label>ì²­ì†Œ ë‚ ì§œ</label>
        <input type="date" id="date" style="width: 120px;">
      </div>

      <div>
        <label>ì²­ì†Œ ì‹œê°„</label>
        <div style="display:flex; gap:6px;">
          <select id="ampm"><option>ì˜¤ì „</option><option>ì˜¤í›„</option></select>
          <select id="hour"></select>
          <select id="minute"><option>00</option><option>30</option></select>
        </div>
      </div>
    </div>

    <label>ì§€ì—­</label>
    <select id="region">
      <option>ì„œìš¸/ê²½ê¸°/ì¸ì²œ/ì„¸ì¢…/ëŒ€ì „</option>
      <option>í˜‘ì†Œì§€ì—­(ê²½ë‚¨/ê²½ë¶/ì „ë‚¨/ì „ë¶)</option>
      <option>ì§„ì§œí˜‘ì†Œì§€ì—­</option>
    </select>

    <label>í˜•íƒœ</label>
    <select id="type">
      <option>ì›ë£¸</option>
      <option>ë³µì¸µì›ë£¸</option>
      <option>1.5ë£¸</option>
      <option>íˆ¬ë£¸</option>
      <option>ì“°ë¦¬ë£¸</option>
      <option>í‰í˜•</option>
    </select>

    <label>í‰ìˆ˜ (25í‰ ì´ìƒ ì…ë ¥)</label>
    <input type="number" id="size" min="25">

    <label>ì˜ˆì•½ê¸ˆ ë ˆë²„ (ê¸°ë³¸ 5ë‹¨ê³„)</label>
    <input type="range" id="depositRange" min="1" max="10" step="1" value="5" oninput="updateRange()">
    <div class="range-value" id="rangeValue">ì˜ˆì•½ê¸ˆ: 50,000ì›</div>

    <button onclick="calc()">ğŸ’° ê²¬ì  ê²°ê³¼ ë³´ê¸°</button>
  </div>

  <!-- ì˜¤ë¥¸ìª½ -->
  <div class="panel">
    <h3>âœ¨ ì¶”ê°€ ì˜µì…˜ ì„ íƒ</h3>
    <div class="options">
      <label><input type="checkbox" value="ì—ì–´ì»¨í•„í„°"> ì—ì–´ì»¨ í•„í„° (+10,000ì›)</label>
      <label><input type="checkbox" value="ì„¸íƒê¸°"> ì„¸íƒê¸° (+10,000ì›)</label>
      <label><input type="checkbox" value="ê±´ì¡°ê¸°"> ê±´ì¡°ê¸° (+10,000ì›)</label>
      <label><input type="checkbox" value="ì‚¬ì´ì²­ì†Œ"> ì‚¬ì´/ê±°ì£¼ì²­ì†Œ (+40,000ì›)</label>
      <label><input type="checkbox" value="ëŒ€ê¸°ì‹œê°„"> ëŒ€ê¸°ì‹œê°„ (+30,000ì›)</label>
      <label><input type="checkbox" value="ìƒˆì§‘ì¦í›„êµ°"> ìƒˆì§‘ì¦í›„êµ° (+70,000ì›)</label>
      <label><input type="checkbox" value="ë™ë¬¼í„¸"> ë™ë¬¼í„¸/ëƒ„ìƒˆì œê±° (+40,000ì›)</label>
      <label><input type="checkbox" value="ê¸°ë¦„ë–¼"> ê¸°ë¦„ë–¼/ë¬¼ë–¼ì²­ì†Œ (+40,000ì›)</label>
      <label><input type="checkbox" value="ëƒ‰ì¥ê³ "> ëƒ‰ì¥ê³  ì–‘ë¬¸ (+20,000ì›)</label>
      <label><input type="checkbox" value="ë¹„í™•ì¥ë² ë€ë‹¤"> ë¹„í™•ì¥í˜• ë² ë€ë‹¤ (+30,000ì›)</label>
      <label><input type="checkbox" value="4ì¸µê³„ë‹¨"> 4ì¸µê³„ë‹¨ (+20,000ì›)</label>
      <label><input type="checkbox" value="ê±°ì£¼ì›ë£¸"> ê±°ì£¼ì²­ì†Œ(ì›ë£¸) (+20,000ì›)</label>
      <label><input type="checkbox" value="ë°”í€´ë°©ì—­"> ë°”í€´ë°©ì—­ (+30,000ì›)</label>
      <label><input type="checkbox" value="ë²½ì§€ì–¼ë£©"> ë²½ì§€ ì–¼ë£©ì œê±° (+80,000ì›)</label>
      <label><input type="checkbox" value="ì‹œìŠ¤í…œë¶„í•´"> ì‹œìŠ¤í…œì—ì–´ì»¨ ì™„ì „ë¶„í•´ (+80,000ì›)</label>
      <label><input type="checkbox" value="ì‹œìŠ¤í…œ1WAY2"> ì‹œìŠ¤í…œì—ì–´ì»¨(1WAY, 2ëŒ€) (+50,000ì›)</label>
      <label><input type="checkbox" value="ì‹œìŠ¤í…œ1WAY1"> ì‹œìŠ¤í…œì—ì–´ì»¨(1WAY, 1ëŒ€) (+30,000ì›)</label>
      <label><input type="checkbox" value="ë§ˆë£¨ì½”íŒ…"> ë§ˆë£¨ì½”íŒ… (í‰ë‹¹ 5,000ì›)</label>
      <label><input type="checkbox" value="ì™¸ì°½ì²­ì†Œ"> ì™¸ì°½ì²­ì†Œ (ê°œë‹¹ 5,000ì›)</label>
    </div>
  </div>
</div>

<div class="result-box" id="result"></div>
<button class="copy-btn" id="copyBtn" style="display:none;" onclick="copyText()">ë³µì‚¬í•˜ê¸°</button>

<script>
let priceData = {};

window.onload = async () => {
  for (let h = 1; h <= 12; h++) {
    document.getElementById("hour").innerHTML += `<option>${h}</option>`;
  }

  const res = await fetch("http://localhost:5001/price");
  priceData = await res.json();

  // âœ… ì‹œê°„ ë³€ê²½ ì´ë²¤íŠ¸
  document.getElementById("hour").addEventListener("change", checkTimeForExtraCleaning);
  document.getElementById("ampm").addEventListener("change", checkTimeForExtraCleaning);
};

// âœ… ì‹œê°„ëŒ€ í™•ì¸ â†’ ì‚¬ì´ì²­ì†Œ ìë™ ì²´í¬/í•´ì œ
function checkTimeForExtraCleaning() {
  const ampm = document.getElementById("ampm").value;
  const hour = parseInt(document.getElementById("hour").value);
  const extraOption = document.querySelector('.options input[value="ì‚¬ì´ì²­ì†Œ"]');

  // ì˜¤ì „ 8~10ì‹œ, ì˜¤í›„ 12~2ì‹œëŠ” ì •ìƒ ì‹œê°„ â†’ ì‚¬ì´ì²­ì†Œ í•´ì œ
  const isNormal =
    (ampm === "ì˜¤ì „" && (hour >= 8 && hour <= 10)) ||
    (ampm === "ì˜¤í›„" && (hour >= 12 || hour <= 2));

  extraOption.checked = !isNormal;
}

function updateRange() {
  const v = document.getElementById("depositRange").value;
  document.getElementById("rangeValue").innerText = `ì˜ˆì•½ê¸ˆ: ${(v * 10000).toLocaleString()}ì›`;
}

function calc() {
  const date = document.getElementById("date").value;
  const ampm = document.getElementById("ampm").value;
  const hour = document.getElementById("hour").value;
  const minute = document.getElementById("minute").value;
  const region = document.getElementById("region").value;
  const type = document.getElementById("type").value;
  const size = parseFloat(document.getElementById("size").value) || 0;
  const deposit = parseInt(document.getElementById("depositRange").value) * 10000;

  if (!date || !hour) {
    alert("ë‚ ì§œì™€ ì‹œê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
    return;
  }

  const rData = priceData[region];
  if (!rData) {
    alert("ì—‘ì…€ì—ì„œ ì§€ì—­ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
    return;
  }

  let base = type === "í‰í˜•" ? size * rData["í‰ë‹¹ë‹¨ê°€"] : rData[type];

  let optionSum = 0;
  const checkboxes = document.querySelectorAll(".options input[type='checkbox']:checked");
  checkboxes.forEach(c => {
    const v = c.value;
    const opt = {
      "ì—ì–´ì»¨í•„í„°":10000,"ì„¸íƒê¸°":10000,"ê±´ì¡°ê¸°":10000,"ì‚¬ì´ì²­ì†Œ":40000,"ëŒ€ê¸°ì‹œê°„":30000,"ìƒˆì§‘ì¦í›„êµ°":70000,
      "ë™ë¬¼í„¸":40000,"ê¸°ë¦„ë–¼":40000,"ëƒ‰ì¥ê³ ":20000,"ë¹„í™•ì¥ë² ë€ë‹¤":30000,"4ì¸µê³„ë‹¨":20000,"ê±°ì£¼ì›ë£¸":20000,
      "ë°”í€´ë°©ì—­":30000,"ë²½ì§€ì–¼ë£©":80000,"ì‹œìŠ¤í…œë¶„í•´":80000,"ì‹œìŠ¤í…œ1WAY2":50000,"ì‹œìŠ¤í…œ1WAY1":30000
    }[v] || 0;
    optionSum += opt;
  });

  if (checkboxChecked("ë§ˆë£¨ì½”íŒ…")) optionSum += size * 5000;
  if (checkboxChecked("ì™¸ì°½ì²­ì†Œ")) optionSum += 5000;

  const total = base + deposit + optionSum;
  const balance = total - deposit;

  const msg = `ì…ì£¼ì²­ì†Œ ê²¬ì  ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤ğŸ™‚

ğŸ“… ì¼ì • : ${date.replace(/-/g,'.')} ${ampm} ${hour}:${minute}
ğŸ’° ì´ ê¸ˆì•¡ : ${total.toLocaleString()}ì›
ğŸ’µ ì˜ˆì•½ê¸ˆ : ${deposit.toLocaleString()}ì›

ì…ê¸ˆ í™•ì¸ í›„ ì˜ˆì•½ì´ í™•ì •ë©ë‹ˆë‹¤.
ì…ê¸ˆê³„ì¢Œ : 1005-504-674760 ìš°ë¦¬ì€í–‰ (ì£¼)ì´ì‚¬ëŒ€í•™

ì²­ì†Œ ì™„ë£Œ í›„ í˜„ì¥ íŒ€ì¥ë‹˜ê»˜
ë‚¨ì€ ê¸ˆì•¡ ${balance.toLocaleString()}ì› ê²°ì œ ë¶€íƒë“œë¦½ë‹ˆë‹¤ :)`;

  document.getElementById("result").innerText = msg;
  document.getElementById("result").style.display = "block";
  document.getElementById("copyBtn").style.display = "block";
}

function checkboxChecked(name) {
  const el = document.querySelector(`.options input[value='${name}']`);
  return el && el.checked;
}

function copyText() {
  navigator.clipboard.writeText(document.getElementById("result").innerText)
    .then(() => alert("ë¬¸ì ë‚´ìš©ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤ âœ…"));
}
</script>
</body>
</html>
